commit ced91d7b971be6173b604154c39279ce90ad87cc
Author: yuan <ssspeed00@gmail.com>
Date:   Tue Apr 20 16:16:32 2021 +0800

    flac: Fix improper buffer reusing (#732)

Index: libsndfile-1.0.25/src/flac.c
===================================================================
--- libsndfile-1.0.25.orig/src/flac.c	2022-01-26 11:40:52.937226367 +0100
+++ libsndfile-1.0.25/src/flac.c	2022-01-26 11:40:52.933226371 +0100
@@ -907,7 +907,11 @@
 	/* Decode some more. */
 	while (pflac->pos < pflac->len)
 	{	if (FLAC__stream_decoder_process_single (pflac->fsd) == 0)
+		{	psf_log_printf (psf, "FLAC__stream_decoder_process_single returned false\n") ;
+			/* Current frame is busted, so NULL the pointer. */
+			pflac->frame = NULL ;
 			break ;
+			} ;
 		state = FLAC__stream_decoder_get_state (pflac->fsd) ;
 		if (state >= FLAC__STREAM_DECODER_END_OF_STREAM)
 		{	psf_log_printf (psf, "FLAC__stream_decoder_get_state returned %s\n", FLAC__StreamDecoderStateString [state]) ;
